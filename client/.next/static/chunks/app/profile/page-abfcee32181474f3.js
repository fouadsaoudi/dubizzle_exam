(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1063:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r={ME:"/me",ADS:"/ads",LOGIN:"/login",MY_ADS:"/my-ads",SUB_CATEGORIES:"/sub-categories",ADMIN_GET_ALL_ADS:"/admin-get-all-ads",UPDATE_AD_STATUS:"/update-ad-status",REGISTER:"/register"}},2659:(e,t,s)=>{Promise.resolve().then(s.bind(s,3246))},3246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5155),a=s(2115),n=s(5695),l=s(4937),o=s(1063),i=s(8941),c=s(8093);function d(){let[e,t]=(0,a.useState)(null),[s,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),m=(0,n.useRouter)();return((0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("user");if(!e||(t(JSON.parse(e)),!localStorage.getItem("token")))return m.push("/login");try{let e=await (0,i.F)(l.A.API_URL+o.A.MY_ADS,"GET");if(e instanceof Response&&e.ok){let t=await e.json();d(t.ads||[])}else console.error("Failed to fetch ads.",e)}catch(e){console.error("Failed to fetch ads:",e)}finally{h(!1)}})()},[m]),u)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("div",{className:"p-8 min-h-screen bg-gray-50",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),e&&(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("h2",{className:"text-2xl font-semibold mb-2",children:["Username: ",e.username]})}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("button",{onClick:()=>m.push("/ads/create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded",children:"+ Create New Ad"})}),(0,r.jsx)("hr",{className:"mb-8"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"My Ads"}),0===s.length?(0,r.jsx)("p",{children:"No ads posted yet."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,r.jsxs)("div",{className:"border p-4 rounded shadow hover:shadow-lg transition flex flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex row mb-2 gap-2",children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:e.title}),(0,r.jsx)("span",{className:"\n											inline-flex px-3 py-1 rounded-full text-xs font-semibold capitalize\n											".concat("approved"===e.status?"bg-green-200 text-green-700":"","\n											").concat("pending"===e.status?"bg-yellow-100 text-gray-700":"","\n											").concat("rejected"===e.status?"bg-red-100 text-red-700":"","\n										"),children:e.status})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("p",{className:"text-green-600 font-bold",children:["$",e.price]}),e.rejection_reason&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"h-0.5 bg-black"}),(0,r.jsx)("h4",{children:"Rejection reason:"}),(0,r.jsx)("p",{className:"text-red-300",children:e.rejection_reason})]})]}),"rejected"!==e.status&&(0,r.jsx)("button",{onClick:()=>m.push("/ads/edit/".concat(e.id)),className:"mt-4 bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded",children:"Edit Ad"})]},e.id))})]})]})}},4937:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r={API_URL:"http://13.48.5.152:8080/api"}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8093:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(5155),a=s(2115),n=s(5695),l=s(4937),o=s(1063),i=s(8941);function c(){let[e,t]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0),d=(0,n.useRouter)();return(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("user");if(e){t(JSON.parse(e)),c(!1);return}if(!localStorage.getItem("token"))return c(!1);try{let e=await (0,i.F)(l.A.API_URL+o.A.ME,"POST");if(e instanceof Response&&e.ok){let s=await e.json();t(s.user),localStorage.setItem("user",JSON.stringify(s.user))}else localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){console.error("Failed to fetch user data:",e)}finally{c(!1)}})()},[]),(0,r.jsxs)("nav",{className:"sticky top-0 w-full bg-white shadow-md p-4 flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-blue-600 cursor-pointer",onClick:()=>d.push("/"),children:"Dubizzle"}),(0,r.jsx)("div",{className:"flex gap-4 items-center",children:s?(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}):e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",(0,r.jsx)("span",{className:"font-semibold",children:e.username}),"!"]}),"admin"===e.role&&(0,r.jsx)("button",{onClick:()=>{d.push("/admin")},className:"px-4 py-2 cursor-pointer bg-blue-500 hover:bg-blue-600 text-white rounded transition",children:"Dashboard"}),(0,r.jsx)("button",{onClick:()=>{d.push("/profile")},className:"px-4 py-2 cursor-pointer bg-yellow-500 hover:bg-yellow-600 text-white rounded transition",children:"Profile"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t(null),d.push("/"),d.refresh()},className:"px-4 py-2 cursor-pointer bg-red-500 hover:bg-red-600 text-white rounded transition",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{href:"/register",className:"px-4 cursor-pointer py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition",children:"Register"}),(0,r.jsx)("a",{href:"/login",className:"px-4 py-2 cursor-pointer bg-green-500 hover:bg-green-600 text-white rounded transition",children:"Login"})]})})]})}},8941:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});let r=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.debug("fetchData debug",e,t);let r={Accept:"application/json"},a=localStorage.getItem("token");a&&(r.Authorization="Bearer ".concat(a));let n={method:t,headers:r};"GET"!==t&&(s instanceof FormData?(delete r["Content-Type"],n.body=s):(r["Content-Type"]="application/json",n.body=JSON.stringify(s)));let l=await fetch(e,n);if(401===l.status)return console.warn("Token expired or invalid. Redirecting to login..."),localStorage.removeItem("token"),window.location.href="/login",Error("Unauthorized. Redirecting to login.");return l}catch(e){return console.error("Error: fetchData",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2659)),_N_E=e.O()}]);