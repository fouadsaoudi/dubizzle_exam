(()=>{var e={};e.id=698,e.ids=[698],e.modules={440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(1658);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/fouad/PhpstormProjects/dubizzle_exam/client/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/fouad/PhpstormProjects/dubizzle_exam/client/src/app/admin/page.tsx","default")},1135:()=>{},1953:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={ME:"/me",ADS:"/ads",LOGIN:"/login",MY_ADS:"/my-ads",SUB_CATEGORIES:"/sub-categories",ADMIN_GET_ALL_ADS:"/admin-get-all-ads",UPDATE_AD_STATUS:"/update-ad-status",REGISTER:"/register"}},2055:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},2816:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(5239),n=r(8088),a=r(8170),i=r.n(a),o=r(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"/Users/fouad/PhpstormProjects/dubizzle_exam/client/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"/Users/fouad/PhpstormProjects/dubizzle_exam/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/fouad/PhpstormProjects/dubizzle_exam/client/src/app/admin/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2996:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4159:(e,t,r)=>{Promise.resolve().then(r.bind(r,1132))},4431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>n});var s=r(7413);r(1135),r(1120);let n={title:"Dubizzle App",description:"Created by Dubizzle"};function a({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{children:e})})}},4494:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(687),n=r(3210),a=r(6869),i=r(1953),o=r(8455);let l=({children:e})=>(0,s.jsx)("div",{className:"p-5 overflow-x-auto rounded-2xl border border-gray-200 shadow",children:(0,s.jsx)("table",{className:"table-auto min-w-full divide-y divide-gray-200 text-sm text-left bg-white",children:e})}),d=({variant:e="primary",className:t="",...r})=>(0,s.jsx)("button",{className:`px-4 py-2 rounded-2xl font-semibold text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-200 text-black hover:bg-gray-300"}[e]} ${t}`,...r,children:r.children}),c=({open:e,onClose:t,children:r})=>e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md p-4 relative",children:[(0,s.jsx)("button",{onClick:t,className:"absolute top-2 right-2 text-gray-500 hover:text-black",children:"\xd7"}),r]})}):null,p=e=>(0,s.jsx)("textarea",{className:"w-full p-2 border border-gray-300 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,...e});var u=r(7829);function h(){let[e,t]=(0,n.useState)([]),[r,h]=(0,n.useState)(null),[x,m]=(0,n.useState)(!0),[b,g]=(0,n.useState)(!1),[j,f]=(0,n.useState)(""),v=async()=>{try{let e=await (0,o.F)(a.A.API_URL+i.A.ADMIN_GET_ALL_ADS,"GET");if(e instanceof Response&&e.ok){let r=await e.json();t(r.ads)}else console.error("Failed to fetch ads",e)}catch(e){console.error("Error fetching ads:",e)}finally{m(!1)}},y=async(e,t)=>{try{let r="rejected"===t?{status:t,rejection_reason:j}:{status:t},s=await (0,o.F)(a.A.API_URL+i.A.UPDATE_AD_STATUS+"/"+e,"PUT",r);s instanceof Response&&s.ok?(v(),N()):(console.error("Failed to update ad status",s),alert("Failed to update status."))}catch(e){console.error("Error updating ad status:",e),alert("Failed to update status.")}},P=e=>{h(e),g(!0),f("")},N=()=>{h(null),g(!1)};return(0,s.jsxs)("div",{children:[(0,s.jsx)(u.A,{}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Moderate Ads"}),x?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsxs)(l,{children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Title"}),(0,s.jsx)("th",{children:"Description"}),(0,s.jsx)("th",{children:"User ID"}),(0,s.jsx)("th",{children:"Sub Category ID"}),(0,s.jsx)("th",{children:"Price"}),(0,s.jsx)("th",{children:"Location"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Rejection Reason"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e&&e.length>0?e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-2",children:e.id}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.title}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.description}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.posted_by}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.sub_category}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.price?`$${e.price}`:"N/A"}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.location||"N/A"}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:`
											inline-flex px-3 py-1 rounded-full text-xs font-semibold capitalize
											${"approved"===e.status?"bg-green-100 text-green-700":""}
											${"pending"===e.status?"bg-yellow-100 text-gray-700":""}
											${"rejected"===e.status?"bg-red-100 text-red-700":""}
										`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.rejection_reason||"â€”"}),(0,s.jsxs)("td",{className:"px-4 py-2 space-x-2 flex",children:[(0,s.jsx)(d,{onClick:()=>y(e.id,"approved"),disabled:"approved"===e.status,className:"text-xs px-3 py-1",children:"Approve"}),(0,s.jsx)(d,{onClick:()=>P(e),disabled:"rejected"===e.status,variant:"secondary",className:"text-xs px-3 py-1 bg-red-300",children:"Reject"})]})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,className:"text-center py-4 text-gray-400",children:"No ads found."})})})]}),(0,s.jsx)(c,{open:b,onClose:N,children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Reject Ad"}),(0,s.jsx)(p,{placeholder:"Enter rejection reason",value:j,onChange:e=>f(e.target.value)}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,s.jsx)(d,{onClick:N,variant:"secondary",children:"Cancel"}),(0,s.jsx)(d,{onClick:()=>r&&y(r.id,"rejected"),disabled:!j.trim(),children:"Reject"})]})]})})]})]})}},5164:()=>{},6869:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={API_URL:"http://13.48.5.152:8080/api"}},7829:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(687),n=r(3210),a=r(6189);function i(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),o=(0,a.useRouter)();return(0,s.jsxs)("nav",{className:"sticky top-0 w-full bg-white shadow-md p-4 flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-blue-600 cursor-pointer",onClick:()=>o.push("/"),children:"Dubizzle"}),(0,s.jsx)("div",{className:"flex gap-4 items-center",children:r?(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",(0,s.jsx)("span",{className:"font-semibold",children:e.username}),"!"]}),"admin"===e.role&&(0,s.jsx)("button",{onClick:()=>{o.push("/admin")},className:"px-4 py-2 cursor-pointer bg-blue-500 hover:bg-blue-600 text-white rounded transition",children:"Dashboard"}),(0,s.jsx)("button",{onClick:()=>{o.push("/profile")},className:"px-4 py-2 cursor-pointer bg-yellow-500 hover:bg-yellow-600 text-white rounded transition",children:"Profile"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t(null),o.refresh()},className:"px-4 py-2 cursor-pointer bg-red-500 hover:bg-red-600 text-white rounded transition",children:"Logout"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("a",{href:"/register",className:"px-4 cursor-pointer py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition",children:"Register"}),(0,s.jsx)("a",{href:"/login",className:"px-4 py-2 cursor-pointer bg-green-500 hover:bg-green-600 text-white rounded transition",children:"Login"})]})})]})}r(6869),r(1953),r(8455)},8455:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});let s=async(e,t,r=null)=>{try{console.debug("fetchData debug",e,t);let s={Accept:"application/json"},n=localStorage.getItem("token");n&&(s.Authorization=`Bearer ${n}`);let a={method:t,headers:s};"GET"!==t&&(r instanceof FormData?(delete s["Content-Type"],a.body=r):(s["Content-Type"]="application/json",a.body=JSON.stringify(r)));let i=await fetch(e,a);if(401===i.status)return console.warn("Token expired or invalid. Redirecting to login..."),localStorage.removeItem("token"),window.location.href="/login",Error("Unauthorized. Redirecting to login.");return i}catch(e){return console.error("Error: fetchData",e),e}}},8583:(e,t,r)=>{Promise.resolve().then(r.bind(r,4494))},8732:()=>{},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,825,934],()=>r(2816));module.exports=s})();